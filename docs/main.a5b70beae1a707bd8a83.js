(()=>{"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var i=function(){var i=function(){function i(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e(this,i),!(t instanceof Node))throw"Can't initialize VanillaTilt because "+t+" is not a Node.";this.width=null,this.height=null,this.clientWidth=null,this.clientHeight=null,this.left=null,this.top=null,this.gammazero=null,this.betazero=null,this.lastgammazero=null,this.lastbetazero=null,this.transitionTimeout=null,this.updateCall=null,this.event=null,this.updateBind=this.update.bind(this),this.resetBind=this.reset.bind(this),this.element=t,this.settings=this.extendSettings(s),this.reverse=this.settings.reverse?-1:1,this.glare=i.isSettingTrue(this.settings.glare),this.glarePrerender=i.isSettingTrue(this.settings["glare-prerender"]),this.fullPageListening=i.isSettingTrue(this.settings["full-page-listening"]),this.gyroscope=i.isSettingTrue(this.settings.gyroscope),this.gyroscopeSamples=this.settings.gyroscopeSamples,this.elementListener=this.getElementListener(),this.glare&&this.prepareGlare(),this.fullPageListening&&this.updateClientSize(),this.addEventListeners(),this.reset(),this.updateInitialPosition()}var s,n,a;return s=i,a=[{key:"isSettingTrue",value:function(e){return""===e||!0===e||1===e}},{key:"init",value:function(e,t){e instanceof Node&&(e=[e]),e instanceof NodeList&&(e=[].slice.call(e)),e instanceof Array&&e.forEach((function(e){"vanillaTilt"in e||(e.vanillaTilt=new i(e,t))}))}}],(n=[{key:"getElementListener",value:function(){if(this.fullPageListening)return window.document;if("string"==typeof this.settings["mouse-event-element"]){var e=document.querySelector(this.settings["mouse-event-element"]);if(e)return e}return this.settings["mouse-event-element"]instanceof Node?this.settings["mouse-event-element"]:this.element}},{key:"addEventListeners",value:function(){this.onMouseEnterBind=this.onMouseEnter.bind(this),this.onMouseMoveBind=this.onMouseMove.bind(this),this.onMouseLeaveBind=this.onMouseLeave.bind(this),this.onWindowResizeBind=this.onWindowResize.bind(this),this.onDeviceOrientationBind=this.onDeviceOrientation.bind(this),this.elementListener.addEventListener("mouseenter",this.onMouseEnterBind),this.elementListener.addEventListener("mouseleave",this.onMouseLeaveBind),this.elementListener.addEventListener("mousemove",this.onMouseMoveBind),(this.glare||this.fullPageListening)&&window.addEventListener("resize",this.onWindowResizeBind),this.gyroscope&&window.addEventListener("deviceorientation",this.onDeviceOrientationBind)}},{key:"removeEventListeners",value:function(){this.elementListener.removeEventListener("mouseenter",this.onMouseEnterBind),this.elementListener.removeEventListener("mouseleave",this.onMouseLeaveBind),this.elementListener.removeEventListener("mousemove",this.onMouseMoveBind),this.gyroscope&&window.removeEventListener("deviceorientation",this.onDeviceOrientationBind),(this.glare||this.fullPageListening)&&window.removeEventListener("resize",this.onWindowResizeBind)}},{key:"destroy",value:function(){clearTimeout(this.transitionTimeout),null!==this.updateCall&&cancelAnimationFrame(this.updateCall),this.reset(),this.removeEventListeners(),this.element.vanillaTilt=null,delete this.element.vanillaTilt,this.element=null}},{key:"onDeviceOrientation",value:function(e){if(null!==e.gamma&&null!==e.beta){this.updateElementPosition(),this.gyroscopeSamples>0&&(this.lastgammazero=this.gammazero,this.lastbetazero=this.betazero,null===this.gammazero?(this.gammazero=e.gamma,this.betazero=e.beta):(this.gammazero=(e.gamma+this.lastgammazero)/2,this.betazero=(e.beta+this.lastbetazero)/2),this.gyroscopeSamples-=1);var t=this.settings.gyroscopeMaxAngleX-this.settings.gyroscopeMinAngleX,i=this.settings.gyroscopeMaxAngleY-this.settings.gyroscopeMinAngleY,s=t/this.width,n=i/this.height,a=(e.gamma-(this.settings.gyroscopeMinAngleX+this.gammazero))/s,l=(e.beta-(this.settings.gyroscopeMinAngleY+this.betazero))/n;null!==this.updateCall&&cancelAnimationFrame(this.updateCall),this.event={clientX:a+this.left,clientY:l+this.top},this.updateCall=requestAnimationFrame(this.updateBind)}}},{key:"onMouseEnter",value:function(){this.updateElementPosition(),this.element.style.willChange="transform",this.setTransition()}},{key:"onMouseMove",value:function(e){null!==this.updateCall&&cancelAnimationFrame(this.updateCall),this.event=e,this.updateCall=requestAnimationFrame(this.updateBind)}},{key:"onMouseLeave",value:function(){this.setTransition(),this.settings.reset&&requestAnimationFrame(this.resetBind)}},{key:"reset",value:function(){this.event={clientX:this.left+this.width/2,clientY:this.top+this.height/2},this.element&&this.element.style&&(this.element.style.transform="perspective(".concat(this.settings.perspective,"px) ")+"rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)"),this.resetGlare()}},{key:"resetGlare",value:function(){this.glare&&(this.glareElement.style.transform="rotate(180deg) translate(-50%, -50%)",this.glareElement.style.opacity="0")}},{key:"updateInitialPosition",value:function(){if(0!==this.settings.startX||0!==this.settings.startY){this.onMouseEnter(),this.fullPageListening?this.event={clientX:(this.settings.startX+this.settings.max)/(2*this.settings.max)*this.clientWidth,clientY:(this.settings.startY+this.settings.max)/(2*this.settings.max)*this.clientHeight}:this.event={clientX:this.left+(this.settings.startX+this.settings.max)/(2*this.settings.max)*this.width,clientY:this.top+(this.settings.startY+this.settings.max)/(2*this.settings.max)*this.height};var e=this.settings.scale;this.settings.scale=1,this.update(),this.settings.scale=e,this.resetGlare()}}},{key:"getValues",value:function(){var e,t;return this.fullPageListening?(e=this.event.clientX/this.clientWidth,t=this.event.clientY/this.clientHeight):(e=(this.event.clientX-this.left)/this.width,t=(this.event.clientY-this.top)/this.height),e=Math.min(Math.max(e,0),1),t=Math.min(Math.max(t,0),1),{tiltX:(this.reverse*(this.settings.max-e*this.settings.max*2)).toFixed(2),tiltY:(this.reverse*(t*this.settings.max*2-this.settings.max)).toFixed(2),percentageX:100*e,percentageY:100*t,angle:Math.atan2(this.event.clientX-(this.left+this.width/2),-(this.event.clientY-(this.top+this.height/2)))*(180/Math.PI)}}},{key:"updateElementPosition",value:function(){var e=this.element.getBoundingClientRect();this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,this.left=e.left,this.top=e.top}},{key:"update",value:function(){var e=this.getValues();this.element.style.transform="perspective("+this.settings.perspective+"px) rotateX("+("x"===this.settings.axis?0:e.tiltY)+"deg) rotateY("+("y"===this.settings.axis?0:e.tiltX)+"deg) scale3d("+this.settings.scale+", "+this.settings.scale+", "+this.settings.scale+")",this.glare&&(this.glareElement.style.transform="rotate(".concat(e.angle,"deg) translate(-50%, -50%)"),this.glareElement.style.opacity="".concat(e.percentageY*this.settings["max-glare"]/100)),this.element.dispatchEvent(new CustomEvent("tiltChange",{detail:e})),this.updateCall=null}},{key:"prepareGlare",value:function(){if(!this.glarePrerender){var e=document.createElement("div");e.classList.add("js-tilt-glare");var t=document.createElement("div");t.classList.add("js-tilt-glare-inner"),e.appendChild(t),this.element.appendChild(e)}this.glareElementWrapper=this.element.querySelector(".js-tilt-glare"),this.glareElement=this.element.querySelector(".js-tilt-glare-inner"),this.glarePrerender||(Object.assign(this.glareElementWrapper.style,{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",overflow:"hidden","pointer-events":"none"}),Object.assign(this.glareElement.style,{position:"absolute",top:"50%",left:"50%","pointer-events":"none","background-image":"linear-gradient(0deg, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%)",transform:"rotate(180deg) translate(-50%, -50%)","transform-origin":"0% 0%",opacity:"0"}),this.updateGlareSize())}},{key:"updateGlareSize",value:function(){if(this.glare){var e=2*(this.element.offsetWidth>this.element.offsetHeight?this.element.offsetWidth:this.element.offsetHeight);Object.assign(this.glareElement.style,{width:"".concat(e,"px"),height:"".concat(e,"px")})}}},{key:"updateClientSize",value:function(){this.clientWidth=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,this.clientHeight=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}},{key:"onWindowResize",value:function(){this.updateGlareSize(),this.updateClientSize()}},{key:"setTransition",value:function(){var e=this;clearTimeout(this.transitionTimeout),this.element.style.transition=this.settings.speed+"ms "+this.settings.easing,this.glare&&(this.glareElement.style.transition="opacity ".concat(this.settings.speed,"ms ").concat(this.settings.easing)),this.transitionTimeout=setTimeout((function(){e.element.style.transition="",e.glare&&(e.glareElement.style.transition="")}),this.settings.speed)}},{key:"extendSettings",value:function(e){var t={reverse:!1,max:15,startX:0,startY:0,perspective:1e3,easing:"cubic-bezier(.03,.98,.52,.99)",scale:1,speed:300,transition:!0,axis:null,glare:!1,"max-glare":1,"glare-prerender":!1,"full-page-listening":!1,"mouse-event-element":null,reset:!0,gyroscope:!0,gyroscopeMinAngleX:-45,gyroscopeMaxAngleX:45,gyroscopeMinAngleY:-45,gyroscopeMaxAngleY:45,gyroscopeSamples:10},i={};for(var s in t)if(s in e)i[s]=e[s];else if(this.element.hasAttribute("data-tilt-"+s)){var n=this.element.getAttribute("data-tilt-"+s);try{i[s]=JSON.parse(n)}catch(e){i[s]=n}}else i[s]=t[s];return i}}])&&t(s.prototype,n),a&&t(s,a),i}();return"undefined"!=typeof document&&(window.VanillaTilt=i,i.init(document.querySelectorAll("[data-tilt]"))),i}(),s=document.querySelector("header"),n=(document.querySelector(".proyecto"),document.querySelector(".toMenu")),a=document.querySelector("#btn"),l=document.querySelectorAll(".menu"),o=document.querySelectorAll(".card");document.querySelector("#btnCv");window.addEventListener("scroll",(function(){s.classList.toggle("sticky",window.scrollY>0)})),a.addEventListener("click",(function(){n.classList.toggle("active")})),l.forEach((function(e){e.addEventListener("click",(function(){n.classList.toggle("active")}))})),i.init(o,{max:30,scale:1.1,glare:!0,"max-glare":.3}),particlesJS("particles-js",{particles:{number:{value:150,density:{enable:!0,value_area:800}},color:{value:"#ffffff"},shape:{type:"circle",stroke:{width:0,color:"#000000"},polygon:{nb_sides:5},image:{src:"img/github.svg",width:100,height:100}},opacity:{value:.5,random:!1,anim:{enable:!1,speed:1,opacity_min:.1,sync:!1}},size:{value:3,random:!0,anim:{enable:!1,speed:40,size_min:.1,sync:!1}},line_linked:{enable:!1,distance:150,color:"#ffffff",opacity:.4,width:1},move:{enable:!0,speed:6,direction:"none",random:!1,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:600,rotateY:1200}}},interactivity:{detect_on:"canvas",events:{onhover:{enable:!0,mode:"repulse"},onclick:{enable:!0,mode:"push"},resize:!0},modes:{grab:{distance:400,line_linked:{opacity:1}},bubble:{distance:400,size:40,duration:2,opacity:8,speed:3},repulse:{distance:200,duration:.4},push:{particles_nb:4},remove:{particles_nb:2}}},retina_detect:!0})})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Ly93ZWJwYWNrLWluaWNpYWwvLi9zcmMvanMvdmFuaWxsYS10aWx0LmpzIiwid2VicGFjazovL3dlYnBhY2staW5pY2lhbC8uL3NyYy9qcy9jb21wb25lbnRlcy5qcyIsIndlYnBhY2s6Ly93ZWJwYWNrLWluaWNpYWwvLi9zcmMvanMvYXBwLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB2YXIgVmFuaWxsYVRpbHQgPSAoZnVuY3Rpb24gKCkge1xuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIENyZWF0ZWQgYnkgU2VyZ2l1IMiYYW5kb3IgKG1pY2t1N3p1KSBvbiAxLzI3LzIwMTcuXG4gKiBPcmlnaW5hbCBpZGVhOiBodHRwczovL2dpdGh1Yi5jb20vZ2lqc3JvZ2UvdGlsdC5qc1xuICogTUlUIExpY2Vuc2UuXG4gKiBWZXJzaW9uIDEuNy4yXG4gKi9cblxuY2xhc3MgVmFuaWxsYVRpbHQge1xuICBjb25zdHJ1Y3RvcihlbGVtZW50LCBzZXR0aW5ncyA9IHt9KSB7XG4gICAgaWYgKCEoZWxlbWVudCBpbnN0YW5jZW9mIE5vZGUpKSB7XG4gICAgICB0aHJvdyAoXCJDYW4ndCBpbml0aWFsaXplIFZhbmlsbGFUaWx0IGJlY2F1c2UgXCIgKyBlbGVtZW50ICsgXCIgaXMgbm90IGEgTm9kZS5cIik7XG4gICAgfVxuXG4gICAgdGhpcy53aWR0aCA9IG51bGw7XG4gICAgdGhpcy5oZWlnaHQgPSBudWxsO1xuICAgIHRoaXMuY2xpZW50V2lkdGggPSBudWxsO1xuICAgIHRoaXMuY2xpZW50SGVpZ2h0ID0gbnVsbDtcbiAgICB0aGlzLmxlZnQgPSBudWxsO1xuICAgIHRoaXMudG9wID0gbnVsbDtcblxuICAgIC8vIGZvciBHeXJvc2NvcGUgc2FtcGxpbmdcbiAgICB0aGlzLmdhbW1hemVybyA9IG51bGw7XG4gICAgdGhpcy5iZXRhemVybyA9IG51bGw7XG4gICAgdGhpcy5sYXN0Z2FtbWF6ZXJvID0gbnVsbDtcbiAgICB0aGlzLmxhc3RiZXRhemVybyA9IG51bGw7XG5cbiAgICB0aGlzLnRyYW5zaXRpb25UaW1lb3V0ID0gbnVsbDtcbiAgICB0aGlzLnVwZGF0ZUNhbGwgPSBudWxsO1xuICAgIHRoaXMuZXZlbnQgPSBudWxsO1xuXG4gICAgdGhpcy51cGRhdGVCaW5kID0gdGhpcy51cGRhdGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLnJlc2V0QmluZCA9IHRoaXMucmVzZXQuYmluZCh0aGlzKTtcblxuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgdGhpcy5zZXR0aW5ncyA9IHRoaXMuZXh0ZW5kU2V0dGluZ3Moc2V0dGluZ3MpO1xuXG4gICAgdGhpcy5yZXZlcnNlID0gdGhpcy5zZXR0aW5ncy5yZXZlcnNlID8gLTEgOiAxO1xuICAgIHRoaXMuZ2xhcmUgPSBWYW5pbGxhVGlsdC5pc1NldHRpbmdUcnVlKHRoaXMuc2V0dGluZ3MuZ2xhcmUpO1xuICAgIHRoaXMuZ2xhcmVQcmVyZW5kZXIgPSBWYW5pbGxhVGlsdC5pc1NldHRpbmdUcnVlKHRoaXMuc2V0dGluZ3NbXCJnbGFyZS1wcmVyZW5kZXJcIl0pO1xuICAgIHRoaXMuZnVsbFBhZ2VMaXN0ZW5pbmcgPSBWYW5pbGxhVGlsdC5pc1NldHRpbmdUcnVlKHRoaXMuc2V0dGluZ3NbXCJmdWxsLXBhZ2UtbGlzdGVuaW5nXCJdKTtcbiAgICB0aGlzLmd5cm9zY29wZSA9IFZhbmlsbGFUaWx0LmlzU2V0dGluZ1RydWUodGhpcy5zZXR0aW5ncy5neXJvc2NvcGUpO1xuICAgIHRoaXMuZ3lyb3Njb3BlU2FtcGxlcyA9IHRoaXMuc2V0dGluZ3MuZ3lyb3Njb3BlU2FtcGxlcztcblxuICAgIHRoaXMuZWxlbWVudExpc3RlbmVyID0gdGhpcy5nZXRFbGVtZW50TGlzdGVuZXIoKTtcblxuICAgIGlmICh0aGlzLmdsYXJlKSB7XG4gICAgICB0aGlzLnByZXBhcmVHbGFyZSgpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmZ1bGxQYWdlTGlzdGVuaW5nKSB7XG4gICAgICB0aGlzLnVwZGF0ZUNsaWVudFNpemUoKTtcbiAgICB9XG5cbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5yZXNldCgpO1xuICAgIHRoaXMudXBkYXRlSW5pdGlhbFBvc2l0aW9uKCk7XG4gIH1cblxuICBzdGF0aWMgaXNTZXR0aW5nVHJ1ZShzZXR0aW5nKSB7XG4gICAgcmV0dXJuIHNldHRpbmcgPT09IFwiXCIgfHwgc2V0dGluZyA9PT0gdHJ1ZSB8fCBzZXR0aW5nID09PSAxO1xuICB9XG5cbiAgLyoqXG4gICAqIE1ldGhvZCByZXR1cm5zIGVsZW1lbnQgd2hhdCB3aWxsIGJlIGxpc3RlbiBtb3VzZSBldmVudHNcbiAgICogQHJldHVybiB7Tm9kZX1cbiAgICovXG4gIGdldEVsZW1lbnRMaXN0ZW5lcigpIHtcbiAgICBpZiAodGhpcy5mdWxsUGFnZUxpc3RlbmluZykge1xuICAgICAgcmV0dXJuIHdpbmRvdy5kb2N1bWVudDtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHRoaXMuc2V0dGluZ3NbXCJtb3VzZS1ldmVudC1lbGVtZW50XCJdID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBjb25zdCBtb3VzZUV2ZW50RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5zZXR0aW5nc1tcIm1vdXNlLWV2ZW50LWVsZW1lbnRcIl0pO1xuXG4gICAgICBpZiAobW91c2VFdmVudEVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIG1vdXNlRXZlbnRFbGVtZW50O1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLnNldHRpbmdzW1wibW91c2UtZXZlbnQtZWxlbWVudFwiXSBpbnN0YW5jZW9mIE5vZGUpIHtcbiAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzW1wibW91c2UtZXZlbnQtZWxlbWVudFwiXTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5lbGVtZW50O1xuICB9XG5cbiAgLyoqXG4gICAqIE1ldGhvZCBzZXQgbGlzdGVuIG1ldGhvZHMgZm9yIHRoaXMuZWxlbWVudExpc3RlbmVyXG4gICAqIEByZXR1cm4ge05vZGV9XG4gICAqL1xuICBhZGRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLm9uTW91c2VFbnRlckJpbmQgPSB0aGlzLm9uTW91c2VFbnRlci5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25Nb3VzZU1vdmVCaW5kID0gdGhpcy5vbk1vdXNlTW92ZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25Nb3VzZUxlYXZlQmluZCA9IHRoaXMub25Nb3VzZUxlYXZlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vbldpbmRvd1Jlc2l6ZUJpbmQgPSB0aGlzLm9uV2luZG93UmVzaXplLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vbkRldmljZU9yaWVudGF0aW9uQmluZCA9IHRoaXMub25EZXZpY2VPcmllbnRhdGlvbi5iaW5kKHRoaXMpO1xuXG4gICAgdGhpcy5lbGVtZW50TGlzdGVuZXIuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZW50ZXJcIiwgdGhpcy5vbk1vdXNlRW50ZXJCaW5kKTtcbiAgICB0aGlzLmVsZW1lbnRMaXN0ZW5lci5hZGRFdmVudExpc3RlbmVyKFwibW91c2VsZWF2ZVwiLCB0aGlzLm9uTW91c2VMZWF2ZUJpbmQpO1xuICAgIHRoaXMuZWxlbWVudExpc3RlbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgdGhpcy5vbk1vdXNlTW92ZUJpbmQpO1xuXG4gICAgaWYgKHRoaXMuZ2xhcmUgfHwgdGhpcy5mdWxsUGFnZUxpc3RlbmluZykge1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdGhpcy5vbldpbmRvd1Jlc2l6ZUJpbmQpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmd5cm9zY29wZSkge1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJkZXZpY2VvcmllbnRhdGlvblwiLCB0aGlzLm9uRGV2aWNlT3JpZW50YXRpb25CaW5kKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTWV0aG9kIHJlbW92ZSBldmVudCBsaXN0ZW5lcnMgZnJvbSBjdXJyZW50IHRoaXMuZWxlbWVudExpc3RlbmVyXG4gICAqL1xuICByZW1vdmVFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLmVsZW1lbnRMaXN0ZW5lci5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2VlbnRlclwiLCB0aGlzLm9uTW91c2VFbnRlckJpbmQpO1xuICAgIHRoaXMuZWxlbWVudExpc3RlbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsIHRoaXMub25Nb3VzZUxlYXZlQmluZCk7XG4gICAgdGhpcy5lbGVtZW50TGlzdGVuZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB0aGlzLm9uTW91c2VNb3ZlQmluZCk7XG5cbiAgICBpZiAodGhpcy5neXJvc2NvcGUpIHtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwiZGV2aWNlb3JpZW50YXRpb25cIiwgdGhpcy5vbkRldmljZU9yaWVudGF0aW9uQmluZCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZ2xhcmUgfHwgdGhpcy5mdWxsUGFnZUxpc3RlbmluZykge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdGhpcy5vbldpbmRvd1Jlc2l6ZUJpbmQpO1xuICAgIH1cbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMudHJhbnNpdGlvblRpbWVvdXQpO1xuICAgIGlmICh0aGlzLnVwZGF0ZUNhbGwgIT09IG51bGwpIHtcbiAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMudXBkYXRlQ2FsbCk7XG4gICAgfVxuXG4gICAgdGhpcy5yZXNldCgpO1xuXG4gICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuZWxlbWVudC52YW5pbGxhVGlsdCA9IG51bGw7XG4gICAgZGVsZXRlIHRoaXMuZWxlbWVudC52YW5pbGxhVGlsdDtcblxuICAgIHRoaXMuZWxlbWVudCA9IG51bGw7XG4gIH1cblxuICBvbkRldmljZU9yaWVudGF0aW9uKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LmdhbW1hID09PSBudWxsIHx8IGV2ZW50LmJldGEgPT09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZUVsZW1lbnRQb3NpdGlvbigpO1xuXG4gICAgaWYgKHRoaXMuZ3lyb3Njb3BlU2FtcGxlcyA+IDApIHtcbiAgICAgIHRoaXMubGFzdGdhbW1hemVybyA9IHRoaXMuZ2FtbWF6ZXJvO1xuICAgICAgdGhpcy5sYXN0YmV0YXplcm8gPSB0aGlzLmJldGF6ZXJvO1xuXG4gICAgICBpZiAodGhpcy5nYW1tYXplcm8gPT09IG51bGwpIHtcbiAgICAgICAgdGhpcy5nYW1tYXplcm8gPSBldmVudC5nYW1tYTtcbiAgICAgICAgdGhpcy5iZXRhemVybyA9IGV2ZW50LmJldGE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmdhbW1hemVybyA9IChldmVudC5nYW1tYSArIHRoaXMubGFzdGdhbW1hemVybykgLyAyO1xuICAgICAgICB0aGlzLmJldGF6ZXJvID0gKGV2ZW50LmJldGEgKyB0aGlzLmxhc3RiZXRhemVybykgLyAyO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmd5cm9zY29wZVNhbXBsZXMgLT0gMTtcbiAgICB9XG5cbiAgICBjb25zdCB0b3RhbEFuZ2xlWCA9IHRoaXMuc2V0dGluZ3MuZ3lyb3Njb3BlTWF4QW5nbGVYIC0gdGhpcy5zZXR0aW5ncy5neXJvc2NvcGVNaW5BbmdsZVg7XG4gICAgY29uc3QgdG90YWxBbmdsZVkgPSB0aGlzLnNldHRpbmdzLmd5cm9zY29wZU1heEFuZ2xlWSAtIHRoaXMuc2V0dGluZ3MuZ3lyb3Njb3BlTWluQW5nbGVZO1xuXG4gICAgY29uc3QgZGVncmVlc1BlclBpeGVsWCA9IHRvdGFsQW5nbGVYIC8gdGhpcy53aWR0aDtcbiAgICBjb25zdCBkZWdyZWVzUGVyUGl4ZWxZID0gdG90YWxBbmdsZVkgLyB0aGlzLmhlaWdodDtcblxuICAgIGNvbnN0IGFuZ2xlWCA9IGV2ZW50LmdhbW1hIC0gKHRoaXMuc2V0dGluZ3MuZ3lyb3Njb3BlTWluQW5nbGVYICsgdGhpcy5nYW1tYXplcm8pO1xuICAgIGNvbnN0IGFuZ2xlWSA9IGV2ZW50LmJldGEgLSAodGhpcy5zZXR0aW5ncy5neXJvc2NvcGVNaW5BbmdsZVkgKyB0aGlzLmJldGF6ZXJvKTtcblxuICAgIGNvbnN0IHBvc1ggPSBhbmdsZVggLyBkZWdyZWVzUGVyUGl4ZWxYO1xuICAgIGNvbnN0IHBvc1kgPSBhbmdsZVkgLyBkZWdyZWVzUGVyUGl4ZWxZO1xuXG4gICAgaWYgKHRoaXMudXBkYXRlQ2FsbCAhPT0gbnVsbCkge1xuICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy51cGRhdGVDYWxsKTtcbiAgICB9XG5cbiAgICB0aGlzLmV2ZW50ID0ge1xuICAgICAgY2xpZW50WDogcG9zWCArIHRoaXMubGVmdCxcbiAgICAgIGNsaWVudFk6IHBvc1kgKyB0aGlzLnRvcCxcbiAgICB9O1xuXG4gICAgdGhpcy51cGRhdGVDYWxsID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMudXBkYXRlQmluZCk7XG4gIH1cblxuICBvbk1vdXNlRW50ZXIoKSB7XG4gICAgdGhpcy51cGRhdGVFbGVtZW50UG9zaXRpb24oKTtcbiAgICB0aGlzLmVsZW1lbnQuc3R5bGUud2lsbENoYW5nZSA9IFwidHJhbnNmb3JtXCI7XG4gICAgdGhpcy5zZXRUcmFuc2l0aW9uKCk7XG4gIH1cblxuICBvbk1vdXNlTW92ZShldmVudCkge1xuICAgIGlmICh0aGlzLnVwZGF0ZUNhbGwgIT09IG51bGwpIHtcbiAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMudXBkYXRlQ2FsbCk7XG4gICAgfVxuXG4gICAgdGhpcy5ldmVudCA9IGV2ZW50O1xuICAgIHRoaXMudXBkYXRlQ2FsbCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnVwZGF0ZUJpbmQpO1xuICB9XG5cbiAgb25Nb3VzZUxlYXZlKCkge1xuICAgIHRoaXMuc2V0VHJhbnNpdGlvbigpO1xuXG4gICAgaWYgKHRoaXMuc2V0dGluZ3MucmVzZXQpIHtcbiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnJlc2V0QmluZCk7XG4gICAgfVxuICB9XG5cbiAgcmVzZXQoKSB7XG4gICAgdGhpcy5ldmVudCA9IHtcbiAgICAgIGNsaWVudFg6IHRoaXMubGVmdCArIHRoaXMud2lkdGggLyAyLFxuICAgICAgY2xpZW50WTogdGhpcy50b3AgKyB0aGlzLmhlaWdodCAvIDJcbiAgICB9O1xuXG4gICAgaWYgKHRoaXMuZWxlbWVudCAmJiB0aGlzLmVsZW1lbnQuc3R5bGUpIHtcbiAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSBgcGVyc3BlY3RpdmUoJHt0aGlzLnNldHRpbmdzLnBlcnNwZWN0aXZlfXB4KSBgICtcbiAgICAgICAgYHJvdGF0ZVgoMGRlZykgYCArXG4gICAgICAgIGByb3RhdGVZKDBkZWcpIGAgK1xuICAgICAgICBgc2NhbGUzZCgxLCAxLCAxKWA7XG4gICAgfVxuXG4gICAgdGhpcy5yZXNldEdsYXJlKCk7XG4gIH1cblxuICByZXNldEdsYXJlKCkge1xuICAgIGlmICh0aGlzLmdsYXJlKSB7XG4gICAgICB0aGlzLmdsYXJlRWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSBcInJvdGF0ZSgxODBkZWcpIHRyYW5zbGF0ZSgtNTAlLCAtNTAlKVwiO1xuICAgICAgdGhpcy5nbGFyZUVsZW1lbnQuc3R5bGUub3BhY2l0eSA9IFwiMFwiO1xuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZUluaXRpYWxQb3NpdGlvbigpIHtcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5zdGFydFggPT09IDAgJiYgdGhpcy5zZXR0aW5ncy5zdGFydFkgPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLm9uTW91c2VFbnRlcigpO1xuXG4gICAgaWYgKHRoaXMuZnVsbFBhZ2VMaXN0ZW5pbmcpIHtcbiAgICAgIHRoaXMuZXZlbnQgPSB7XG4gICAgICAgIGNsaWVudFg6ICh0aGlzLnNldHRpbmdzLnN0YXJ0WCArIHRoaXMuc2V0dGluZ3MubWF4KSAvICgyICogdGhpcy5zZXR0aW5ncy5tYXgpICogdGhpcy5jbGllbnRXaWR0aCxcbiAgICAgICAgY2xpZW50WTogKHRoaXMuc2V0dGluZ3Muc3RhcnRZICsgdGhpcy5zZXR0aW5ncy5tYXgpIC8gKDIgKiB0aGlzLnNldHRpbmdzLm1heCkgKiB0aGlzLmNsaWVudEhlaWdodFxuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5ldmVudCA9IHtcbiAgICAgICAgY2xpZW50WDogdGhpcy5sZWZ0ICsgKCh0aGlzLnNldHRpbmdzLnN0YXJ0WCArIHRoaXMuc2V0dGluZ3MubWF4KSAvICgyICogdGhpcy5zZXR0aW5ncy5tYXgpICogdGhpcy53aWR0aCksXG4gICAgICAgIGNsaWVudFk6IHRoaXMudG9wICsgKCh0aGlzLnNldHRpbmdzLnN0YXJ0WSArIHRoaXMuc2V0dGluZ3MubWF4KSAvICgyICogdGhpcy5zZXR0aW5ncy5tYXgpICogdGhpcy5oZWlnaHQpXG4gICAgICB9O1xuICAgIH1cblxuXG4gICAgbGV0IGJhY2t1cFNjYWxlID0gdGhpcy5zZXR0aW5ncy5zY2FsZTtcbiAgICB0aGlzLnNldHRpbmdzLnNjYWxlID0gMTtcbiAgICB0aGlzLnVwZGF0ZSgpO1xuICAgIHRoaXMuc2V0dGluZ3Muc2NhbGUgPSBiYWNrdXBTY2FsZTtcbiAgICB0aGlzLnJlc2V0R2xhcmUoKTtcbiAgfVxuXG4gIGdldFZhbHVlcygpIHtcbiAgICBsZXQgeCwgeTtcblxuICAgIGlmICh0aGlzLmZ1bGxQYWdlTGlzdGVuaW5nKSB7XG4gICAgICB4ID0gdGhpcy5ldmVudC5jbGllbnRYIC8gdGhpcy5jbGllbnRXaWR0aDtcbiAgICAgIHkgPSB0aGlzLmV2ZW50LmNsaWVudFkgLyB0aGlzLmNsaWVudEhlaWdodDtcbiAgICB9IGVsc2Uge1xuICAgICAgeCA9ICh0aGlzLmV2ZW50LmNsaWVudFggLSB0aGlzLmxlZnQpIC8gdGhpcy53aWR0aDtcbiAgICAgIHkgPSAodGhpcy5ldmVudC5jbGllbnRZIC0gdGhpcy50b3ApIC8gdGhpcy5oZWlnaHQ7XG4gICAgfVxuXG4gICAgeCA9IE1hdGgubWluKE1hdGgubWF4KHgsIDApLCAxKTtcbiAgICB5ID0gTWF0aC5taW4oTWF0aC5tYXgoeSwgMCksIDEpO1xuXG4gICAgbGV0IHRpbHRYID0gKHRoaXMucmV2ZXJzZSAqICh0aGlzLnNldHRpbmdzLm1heCAtIHggKiB0aGlzLnNldHRpbmdzLm1heCAqIDIpKS50b0ZpeGVkKDIpO1xuICAgIGxldCB0aWx0WSA9ICh0aGlzLnJldmVyc2UgKiAoeSAqIHRoaXMuc2V0dGluZ3MubWF4ICogMiAtIHRoaXMuc2V0dGluZ3MubWF4KSkudG9GaXhlZCgyKTtcbiAgICBsZXQgYW5nbGUgPSBNYXRoLmF0YW4yKHRoaXMuZXZlbnQuY2xpZW50WCAtICh0aGlzLmxlZnQgKyB0aGlzLndpZHRoIC8gMiksIC0odGhpcy5ldmVudC5jbGllbnRZIC0gKHRoaXMudG9wICsgdGhpcy5oZWlnaHQgLyAyKSkpICogKDE4MCAvIE1hdGguUEkpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRpbHRYOiB0aWx0WCxcbiAgICAgIHRpbHRZOiB0aWx0WSxcbiAgICAgIHBlcmNlbnRhZ2VYOiB4ICogMTAwLFxuICAgICAgcGVyY2VudGFnZVk6IHkgKiAxMDAsXG4gICAgICBhbmdsZTogYW5nbGVcbiAgICB9O1xuICB9XG5cbiAgdXBkYXRlRWxlbWVudFBvc2l0aW9uKCkge1xuICAgIGxldCByZWN0ID0gdGhpcy5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgdGhpcy53aWR0aCA9IHRoaXMuZWxlbWVudC5vZmZzZXRXaWR0aDtcbiAgICB0aGlzLmhlaWdodCA9IHRoaXMuZWxlbWVudC5vZmZzZXRIZWlnaHQ7XG4gICAgdGhpcy5sZWZ0ID0gcmVjdC5sZWZ0O1xuICAgIHRoaXMudG9wID0gcmVjdC50b3A7XG4gIH1cblxuICB1cGRhdGUoKSB7XG4gICAgbGV0IHZhbHVlcyA9IHRoaXMuZ2V0VmFsdWVzKCk7XG5cbiAgICB0aGlzLmVsZW1lbnQuc3R5bGUudHJhbnNmb3JtID0gXCJwZXJzcGVjdGl2ZShcIiArIHRoaXMuc2V0dGluZ3MucGVyc3BlY3RpdmUgKyBcInB4KSBcIiArXG4gICAgICBcInJvdGF0ZVgoXCIgKyAodGhpcy5zZXR0aW5ncy5heGlzID09PSBcInhcIiA/IDAgOiB2YWx1ZXMudGlsdFkpICsgXCJkZWcpIFwiICtcbiAgICAgIFwicm90YXRlWShcIiArICh0aGlzLnNldHRpbmdzLmF4aXMgPT09IFwieVwiID8gMCA6IHZhbHVlcy50aWx0WCkgKyBcImRlZykgXCIgK1xuICAgICAgXCJzY2FsZTNkKFwiICsgdGhpcy5zZXR0aW5ncy5zY2FsZSArIFwiLCBcIiArIHRoaXMuc2V0dGluZ3Muc2NhbGUgKyBcIiwgXCIgKyB0aGlzLnNldHRpbmdzLnNjYWxlICsgXCIpXCI7XG5cbiAgICBpZiAodGhpcy5nbGFyZSkge1xuICAgICAgdGhpcy5nbGFyZUVsZW1lbnQuc3R5bGUudHJhbnNmb3JtID0gYHJvdGF0ZSgke3ZhbHVlcy5hbmdsZX1kZWcpIHRyYW5zbGF0ZSgtNTAlLCAtNTAlKWA7XG4gICAgICB0aGlzLmdsYXJlRWxlbWVudC5zdHlsZS5vcGFjaXR5ID0gYCR7dmFsdWVzLnBlcmNlbnRhZ2VZICogdGhpcy5zZXR0aW5nc1tcIm1heC1nbGFyZVwiXSAvIDEwMH1gO1xuICAgIH1cblxuICAgIHRoaXMuZWxlbWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcInRpbHRDaGFuZ2VcIiwge1xuICAgICAgXCJkZXRhaWxcIjogdmFsdWVzXG4gICAgfSkpO1xuXG4gICAgdGhpcy51cGRhdGVDYWxsID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBcHBlbmRzIHRoZSBnbGFyZSBlbGVtZW50IChpZiBnbGFyZVByZXJlbmRlciBlcXVhbHMgZmFsc2UpXG4gICAqIGFuZCBzZXRzIHRoZSBkZWZhdWx0IHN0eWxlXG4gICAqL1xuICBwcmVwYXJlR2xhcmUoKSB7XG4gICAgLy8gSWYgb3B0aW9uIHByZS1yZW5kZXIgaXMgZW5hYmxlZCB3ZSBhc3N1bWUgYWxsIGh0bWwvY3NzIGlzIHByZXNlbnQgZm9yIGFuIG9wdGltYWwgZ2xhcmUgZWZmZWN0LlxuICAgIGlmICghdGhpcy5nbGFyZVByZXJlbmRlcikge1xuICAgICAgLy8gQ3JlYXRlIGdsYXJlIGVsZW1lbnRcbiAgICAgIGNvbnN0IGpzVGlsdEdsYXJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGpzVGlsdEdsYXJlLmNsYXNzTGlzdC5hZGQoXCJqcy10aWx0LWdsYXJlXCIpO1xuXG4gICAgICBjb25zdCBqc1RpbHRHbGFyZUlubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGpzVGlsdEdsYXJlSW5uZXIuY2xhc3NMaXN0LmFkZChcImpzLXRpbHQtZ2xhcmUtaW5uZXJcIik7XG5cbiAgICAgIGpzVGlsdEdsYXJlLmFwcGVuZENoaWxkKGpzVGlsdEdsYXJlSW5uZXIpO1xuICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKGpzVGlsdEdsYXJlKTtcbiAgICB9XG5cbiAgICB0aGlzLmdsYXJlRWxlbWVudFdyYXBwZXIgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5qcy10aWx0LWdsYXJlXCIpO1xuICAgIHRoaXMuZ2xhcmVFbGVtZW50ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuanMtdGlsdC1nbGFyZS1pbm5lclwiKTtcblxuICAgIGlmICh0aGlzLmdsYXJlUHJlcmVuZGVyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgT2JqZWN0LmFzc2lnbih0aGlzLmdsYXJlRWxlbWVudFdyYXBwZXIuc3R5bGUsIHtcbiAgICAgIFwicG9zaXRpb25cIjogXCJhYnNvbHV0ZVwiLFxuICAgICAgXCJ0b3BcIjogXCIwXCIsXG4gICAgICBcImxlZnRcIjogXCIwXCIsXG4gICAgICBcIndpZHRoXCI6IFwiMTAwJVwiLFxuICAgICAgXCJoZWlnaHRcIjogXCIxMDAlXCIsXG4gICAgICBcIm92ZXJmbG93XCI6IFwiaGlkZGVuXCIsXG4gICAgICBcInBvaW50ZXItZXZlbnRzXCI6IFwibm9uZVwiXG4gICAgfSk7XG5cbiAgICBPYmplY3QuYXNzaWduKHRoaXMuZ2xhcmVFbGVtZW50LnN0eWxlLCB7XG4gICAgICBcInBvc2l0aW9uXCI6IFwiYWJzb2x1dGVcIixcbiAgICAgIFwidG9wXCI6IFwiNTAlXCIsXG4gICAgICBcImxlZnRcIjogXCI1MCVcIixcbiAgICAgIFwicG9pbnRlci1ldmVudHNcIjogXCJub25lXCIsXG4gICAgICBcImJhY2tncm91bmQtaW1hZ2VcIjogYGxpbmVhci1ncmFkaWVudCgwZGVnLCByZ2JhKDI1NSwyNTUsMjU1LDApIDAlLCByZ2JhKDI1NSwyNTUsMjU1LDEpIDEwMCUpYCxcbiAgICAgIFwidHJhbnNmb3JtXCI6IFwicm90YXRlKDE4MGRlZykgdHJhbnNsYXRlKC01MCUsIC01MCUpXCIsXG4gICAgICBcInRyYW5zZm9ybS1vcmlnaW5cIjogXCIwJSAwJVwiLFxuICAgICAgXCJvcGFjaXR5XCI6IFwiMFwiLFxuICAgIH0pO1xuXG4gICAgdGhpcy51cGRhdGVHbGFyZVNpemUoKTtcbiAgfVxuXG4gIHVwZGF0ZUdsYXJlU2l6ZSgpIHtcbiAgICBpZiAodGhpcy5nbGFyZSkge1xuICAgICAgY29uc3QgZ2xhcmVTaXplID0gKHRoaXMuZWxlbWVudC5vZmZzZXRXaWR0aCA+IHRoaXMuZWxlbWVudC5vZmZzZXRIZWlnaHQgPyB0aGlzLmVsZW1lbnQub2Zmc2V0V2lkdGggOiB0aGlzLmVsZW1lbnQub2Zmc2V0SGVpZ2h0KSAqIDI7XG5cbiAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5nbGFyZUVsZW1lbnQuc3R5bGUsIHtcbiAgICAgICAgXCJ3aWR0aFwiOiBgJHtnbGFyZVNpemV9cHhgLFxuICAgICAgICBcImhlaWdodFwiOiBgJHtnbGFyZVNpemV9cHhgLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlQ2xpZW50U2l6ZSgpIHtcbiAgICB0aGlzLmNsaWVudFdpZHRoID0gd2luZG93LmlubmVyV2lkdGhcbiAgICAgIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aFxuICAgICAgfHwgZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aDtcblxuICAgIHRoaXMuY2xpZW50SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0XG4gICAgICB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0XG4gICAgICB8fCBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodDtcbiAgfVxuXG4gIG9uV2luZG93UmVzaXplKCkge1xuICAgIHRoaXMudXBkYXRlR2xhcmVTaXplKCk7XG4gICAgdGhpcy51cGRhdGVDbGllbnRTaXplKCk7XG4gIH1cblxuICBzZXRUcmFuc2l0aW9uKCkge1xuICAgIGNsZWFyVGltZW91dCh0aGlzLnRyYW5zaXRpb25UaW1lb3V0KTtcbiAgICB0aGlzLmVsZW1lbnQuc3R5bGUudHJhbnNpdGlvbiA9IHRoaXMuc2V0dGluZ3Muc3BlZWQgKyBcIm1zIFwiICsgdGhpcy5zZXR0aW5ncy5lYXNpbmc7XG4gICAgaWYgKHRoaXMuZ2xhcmUpIHRoaXMuZ2xhcmVFbGVtZW50LnN0eWxlLnRyYW5zaXRpb24gPSBgb3BhY2l0eSAke3RoaXMuc2V0dGluZ3Muc3BlZWR9bXMgJHt0aGlzLnNldHRpbmdzLmVhc2luZ31gO1xuXG4gICAgdGhpcy50cmFuc2l0aW9uVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLnRyYW5zaXRpb24gPSBcIlwiO1xuICAgICAgaWYgKHRoaXMuZ2xhcmUpIHtcbiAgICAgICAgdGhpcy5nbGFyZUVsZW1lbnQuc3R5bGUudHJhbnNpdGlvbiA9IFwiXCI7XG4gICAgICB9XG4gICAgfSwgdGhpcy5zZXR0aW5ncy5zcGVlZCk7XG5cbiAgfVxuXG4gIC8qKlxuICAgKiBNZXRob2QgcmV0dXJuIHBhdGNoZWQgc2V0dGluZ3Mgb2YgaW5zdGFuY2VcbiAgICogQHBhcmFtIHtib29sZWFufSBzZXR0aW5ncy5yZXZlcnNlIC0gcmV2ZXJzZSB0aGUgdGlsdCBkaXJlY3Rpb25cbiAgICogQHBhcmFtIHtudW1iZXJ9IHNldHRpbmdzLm1heCAtIG1heCB0aWx0IHJvdGF0aW9uIChkZWdyZWVzKVxuICAgKiBAcGFyYW0ge3N0YXJ0WH0gc2V0dGluZ3Muc3RhcnRYIC0gdGhlIHN0YXJ0aW5nIHRpbHQgb24gdGhlIFggYXhpcywgaW4gZGVncmVlcy4gRGVmYXVsdDogMFxuICAgKiBAcGFyYW0ge3N0YXJ0WX0gc2V0dGluZ3Muc3RhcnRZIC0gdGhlIHN0YXJ0aW5nIHRpbHQgb24gdGhlIFkgYXhpcywgaW4gZGVncmVlcy4gRGVmYXVsdDogMFxuICAgKiBAcGFyYW0ge251bWJlcn0gc2V0dGluZ3MucGVyc3BlY3RpdmUgLSBUcmFuc2Zvcm0gcGVyc3BlY3RpdmUsIHRoZSBsb3dlciB0aGUgbW9yZSBleHRyZW1lIHRoZSB0aWx0IGdldHNcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNldHRpbmdzLmVhc2luZyAtIEVhc2luZyBvbiBlbnRlci9leGl0XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzZXR0aW5ncy5zY2FsZSAtIDIgPSAyMDAlLCAxLjUgPSAxNTAlLCBldGMuLlxuICAgKiBAcGFyYW0ge251bWJlcn0gc2V0dGluZ3Muc3BlZWQgLSBTcGVlZCBvZiB0aGUgZW50ZXIvZXhpdCB0cmFuc2l0aW9uXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc2V0dGluZ3MudHJhbnNpdGlvbiAtIFNldCBhIHRyYW5zaXRpb24gb24gZW50ZXIvZXhpdFxuICAgKiBAcGFyYW0ge3N0cmluZ3xudWxsfSBzZXR0aW5ncy5heGlzIC0gV2hhdCBheGlzIHNob3VsZCBiZSBkaXNhYmxlZC4gQ2FuIGJlIFggb3IgWVxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHNldHRpbmdzLmdsYXJlIC0gV2hhdCBheGlzIHNob3VsZCBiZSBkaXNhYmxlZC4gQ2FuIGJlIFggb3IgWVxuICAgKiBAcGFyYW0ge251bWJlcn0gc2V0dGluZ3MubWF4LWdsYXJlIC0gdGhlIG1heGltdW0gXCJnbGFyZVwiIG9wYWNpdHkgKDEgPSAxMDAlLCAwLjUgPSA1MCUpXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc2V0dGluZ3MuZ2xhcmUtcHJlcmVuZGVyIC0gZmFsc2UgPSBWYW5pbGxhVGlsdCBjcmVhdGVzIHRoZSBnbGFyZSBlbGVtZW50cyBmb3IgeW91LCBvdGhlcndpc2VcbiAgICogQHBhcmFtIHtib29sZWFufSBzZXR0aW5ncy5mdWxsLXBhZ2UtbGlzdGVuaW5nIC0gSWYgdHJ1ZSwgcGFyYWxsYXggZWZmZWN0IHdpbGwgbGlzdGVuIHRvIG1vdXNlIG1vdmUgZXZlbnRzIG9uIHRoZSB3aG9sZSBkb2N1bWVudCwgbm90IG9ubHkgdGhlIHNlbGVjdGVkIGVsZW1lbnRcbiAgICogQHBhcmFtIHtzdHJpbmd8b2JqZWN0fSBzZXR0aW5ncy5tb3VzZS1ldmVudC1lbGVtZW50IC0gU3RyaW5nIHNlbGVjdG9yIG9yIGxpbmsgdG8gSFRNTC1lbGVtZW50IHdoYXQgd2lsbCBiZSBsaXN0ZW4gbW91c2UgZXZlbnRzXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc2V0dGluZ3MucmVzZXQgLSBmYWxzZSA9IElmIHRoZSB0aWx0IGVmZmVjdCBoYXMgdG8gYmUgcmVzZXQgb24gZXhpdFxuICAgKiBAcGFyYW0ge2d5cm9zY29wZX0gc2V0dGluZ3MuZ3lyb3Njb3BlIC0gRW5hYmxlIHRpbHRpbmcgYnkgZGV2aWNlb3JpZW50YXRpb24gZXZlbnRzXG4gICAqIEBwYXJhbSB7Z3lyb3Njb3BlU2Vuc2l0aXZpdHl9IHNldHRpbmdzLmd5cm9zY29wZVNlbnNpdGl2aXR5IC0gQmV0d2VlbiAwIGFuZCAxIC0gVGhlIGFuZ2xlIGF0IHdoaWNoIG1heCB0aWx0IHBvc2l0aW9uIGlzIHJlYWNoZWQuIDEgPSA5MGRlZywgMC41ID0gNDVkZWcsIGV0Yy4uXG4gICAqIEBwYXJhbSB7Z3lyb3Njb3BlU2FtcGxlc30gc2V0dGluZ3MuZ3lyb3Njb3BlU2FtcGxlcyAtIEhvdyBtYW55IGd5cm9zY29wZSBtb3ZlcyB0byBkZWNpZGUgdGhlIHN0YXJ0aW5nIHBvc2l0aW9uLlxuICAgKi9cbiAgZXh0ZW5kU2V0dGluZ3Moc2V0dGluZ3MpIHtcbiAgICBsZXQgZGVmYXVsdFNldHRpbmdzID0ge1xuICAgICAgcmV2ZXJzZTogZmFsc2UsXG4gICAgICBtYXg6IDE1LFxuICAgICAgc3RhcnRYOiAwLFxuICAgICAgc3RhcnRZOiAwLFxuICAgICAgcGVyc3BlY3RpdmU6IDEwMDAsXG4gICAgICBlYXNpbmc6IFwiY3ViaWMtYmV6aWVyKC4wMywuOTgsLjUyLC45OSlcIixcbiAgICAgIHNjYWxlOiAxLFxuICAgICAgc3BlZWQ6IDMwMCxcbiAgICAgIHRyYW5zaXRpb246IHRydWUsXG4gICAgICBheGlzOiBudWxsLFxuICAgICAgZ2xhcmU6IGZhbHNlLFxuICAgICAgXCJtYXgtZ2xhcmVcIjogMSxcbiAgICAgIFwiZ2xhcmUtcHJlcmVuZGVyXCI6IGZhbHNlLFxuICAgICAgXCJmdWxsLXBhZ2UtbGlzdGVuaW5nXCI6IGZhbHNlLFxuICAgICAgXCJtb3VzZS1ldmVudC1lbGVtZW50XCI6IG51bGwsXG4gICAgICByZXNldDogdHJ1ZSxcbiAgICAgIGd5cm9zY29wZTogdHJ1ZSxcbiAgICAgIGd5cm9zY29wZU1pbkFuZ2xlWDogLTQ1LFxuICAgICAgZ3lyb3Njb3BlTWF4QW5nbGVYOiA0NSxcbiAgICAgIGd5cm9zY29wZU1pbkFuZ2xlWTogLTQ1LFxuICAgICAgZ3lyb3Njb3BlTWF4QW5nbGVZOiA0NSxcbiAgICAgIGd5cm9zY29wZVNhbXBsZXM6IDEwXG4gICAgfTtcblxuICAgIGxldCBuZXdTZXR0aW5ncyA9IHt9O1xuICAgIGZvciAodmFyIHByb3BlcnR5IGluIGRlZmF1bHRTZXR0aW5ncykge1xuICAgICAgaWYgKHByb3BlcnR5IGluIHNldHRpbmdzKSB7XG4gICAgICAgIG5ld1NldHRpbmdzW3Byb3BlcnR5XSA9IHNldHRpbmdzW3Byb3BlcnR5XTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5lbGVtZW50Lmhhc0F0dHJpYnV0ZShcImRhdGEtdGlsdC1cIiArIHByb3BlcnR5KSkge1xuICAgICAgICBsZXQgYXR0cmlidXRlID0gdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtdGlsdC1cIiArIHByb3BlcnR5KTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBuZXdTZXR0aW5nc1twcm9wZXJ0eV0gPSBKU09OLnBhcnNlKGF0dHJpYnV0ZSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBuZXdTZXR0aW5nc1twcm9wZXJ0eV0gPSBhdHRyaWJ1dGU7XG4gICAgICAgIH1cblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3U2V0dGluZ3NbcHJvcGVydHldID0gZGVmYXVsdFNldHRpbmdzW3Byb3BlcnR5XTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbmV3U2V0dGluZ3M7XG4gIH1cblxuICBzdGF0aWMgaW5pdChlbGVtZW50cywgc2V0dGluZ3MpIHtcbiAgICBpZiAoZWxlbWVudHMgaW5zdGFuY2VvZiBOb2RlKSB7XG4gICAgICBlbGVtZW50cyA9IFtlbGVtZW50c107XG4gICAgfVxuXG4gICAgaWYgKGVsZW1lbnRzIGluc3RhbmNlb2YgTm9kZUxpc3QpIHtcbiAgICAgIGVsZW1lbnRzID0gW10uc2xpY2UuY2FsbChlbGVtZW50cyk7XG4gICAgfVxuXG4gICAgaWYgKCEoZWxlbWVudHMgaW5zdGFuY2VvZiBBcnJheSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBlbGVtZW50cy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICBpZiAoIShcInZhbmlsbGFUaWx0XCIgaW4gZWxlbWVudCkpIHtcbiAgICAgICAgZWxlbWVudC52YW5pbGxhVGlsdCA9IG5ldyBWYW5pbGxhVGlsdChlbGVtZW50LCBzZXR0aW5ncyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAvKiBleHBvc2UgdGhlIGNsYXNzIHRvIHdpbmRvdyAqL1xuICB3aW5kb3cuVmFuaWxsYVRpbHQgPSBWYW5pbGxhVGlsdDtcblxuICAvKipcbiAgICogQXV0byBsb2FkXG4gICAqL1xuICBWYW5pbGxhVGlsdC5pbml0KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbZGF0YS10aWx0XVwiKSk7XG59XG5cbnJldHVybiBWYW5pbGxhVGlsdDtcblxufSgpKTtcbiIsImltcG9ydCB7IFZhbmlsbGFUaWx0IH0gZnJvbSAnLi92YW5pbGxhLXRpbHQuanMnO1xyXG5pbXBvcnQge2VmZWN0b3NKc30gZnJvbSAnLi9hcHAuanMnO1xyXG5cclxuY29uc3QgaGVhZGVyICAgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdoZWFkZXInKTtcclxuY29uc3QgcHJvamVjdHMgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJveWVjdG8nKTtcclxuY29uc3QgbWVudU1vdmlsICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9NZW51Jyk7XHJcbmNvbnN0IGJ0biAgICAgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2J0bicpO1xyXG5jb25zdCBtZW51ICAgICAgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tZW51Jyk7XHJcbmNvbnN0IHRhcmpldGEgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhcmQnKTtcclxuY29uc3QgYnRuQ3YgICAgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYnRuQ3YnKTtcclxuLy8gY29uc3QgbWVudVRvZ2dsZSAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWVudVRvZ2dsZScpO1xyXG4vLyBjb25zdCBuYXZlZ2FjaW9uICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYXZpZ2F0aW9uJyk7XHJcbi8vIGNvbnN0IGhvbWUgICAgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmluaWNpbycpO1xyXG4vLyBjb25zdCBhYm91dCAgICAgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hY2VyY2EnKTtcclxuLy8gY29uc3Qgc2tpbGxzICAgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGFiaWxpZGFkJyk7XHJcblxyXG4vKi0tLS0tLS0tLS0tLS0tRVZFTlRPUy0tLS0tLS0tLS0tLS0tLSAqL1xyXG5jb25zdCBzdGlja3lOYXYgPSAoKSA9PiB7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgKCkgPT4ge1xyXG4gICAgICAgIGhlYWRlci5jbGFzc0xpc3QudG9nZ2xlKFwic3RpY2t5XCIsIHdpbmRvdy5zY3JvbGxZID4gMCApO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qQm90b24gZGUgbWVudSBwYXJhIHBhbnRhbGxhcyBwZXF1ZcOxYXMgKi9cclxuY29uc3QgYm90b25NZW51ID0gKCkgPT4ge1xyXG4gICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIG1lbnVNb3ZpbC5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhcImhvbGEgbXVuZG9cIik7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLypDbGFzZSBxdWUgYWN0aXZhIGVsIG1lbnUgcGFyYSBwYW50YWxsYXMgcGVxdWXDsWFzICovXHJcbmNvbnN0IG1lbnVMaW5rcyA9ICgpID0+IHtcclxuICAgIG1lbnUuZm9yRWFjaCgoZXZlbnQpID0+IHtcclxuICAgICAgICBldmVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgbWVudU1vdmlsLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSlcclxufVxyXG5cclxuLypBbmltYWNpb24gM2QgZGUgbG9zIHByb2plY3RvcyAqL1xyXG5jb25zdCBhbmltYWNpb25DYXJkID0gKCkgPT4ge1xyXG4gICAgVmFuaWxsYVRpbHQuaW5pdCggdGFyamV0YSwge1xyXG4gICAgICAgIG1heDogMzAsXHJcbiAgICAgICAgc2NhbGU6IDEuMSxcclxuICAgICAgICBnbGFyZTogdHJ1ZSxcclxuICAgICAgICBcIm1heC1nbGFyZVwiOiAwLjNcclxuICAgIH0pO1xyXG59XHJcblxyXG4vKkRlc2NhcmdhciBjdiBlbiBwZGYgKi9cclxuY29uc3QgZGVzY2FyZ2FyQXJjaGl2byA9ICgpID0+IHtcclxuICAgIGJ0bkN2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIFxyXG4gICAgfSk7XHJcbn1cclxuXHJcbmNvbnN0IG1lbnVEZXNwbGVnYWJsZSA9ICgpID0+IHtcclxuICAgIC8vIG1lbnVUb2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAvLyAgICAgY29uc29sZS5sb2coJ0VzdGEgY2FyZ2FuZG8nKTtcclxuICAgIC8vICAgICBtZW51VG9nZ2xlLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xyXG4gICAgLy8gICAgIG5hdmVnYWNpb24uY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7XHJcbiAgICAvLyB9KTtcclxufVxyXG5jb25zdCBkZXNhY3RpdmFyTWVudSA9KCkgPT4ge1xyXG4gICAgLy8gbWVudVRvZ2dsZS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgIC8vIG5hdmVnYWNpb24uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbn1cclxuY29uc3QgZWplY3V0YXJNZW51ID0gKCkgPT4ge1xyXG4gICAgLy8gaWYoaG9tZS5hZGRFdmVudExpc3RlbmVyKXtcclxuICAgIC8vICAgICBob21lLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgLy8gICAgICAgICBkZXNhY3RpdmFyTWVudSgpO1xyXG4gICAgLy8gICAgIH0pO1xyXG4gICAgLy8gfVxyXG4gICAgXHJcbiAgICAvLyBpZihhYm91dC5hZGRFdmVudExpc3RlbmVyKXtcclxuICAgIC8vICAgICBhYm91dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIC8vICAgICAgICAgZGVzYWN0aXZhck1lbnUoKTtcclxuICAgIC8vICAgICB9KTtcclxuICAgIC8vIH1cclxuXHJcbiAgICAvLyBpZihza2lsbHMuYWRkRXZlbnRMaXN0ZW5lcil7XHJcbiAgICAvLyAgICAgc2tpbGxzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgLy8gICAgICAgICBkZXNhY3RpdmFyTWVudSgpO1xyXG4gICAgLy8gICAgIH0pO1xyXG4gICAgLy8gfVxyXG5cclxuICAgIC8vIGlmKHByb2plY3RzLmFkZEV2ZW50TGlzdGVuZXIpe1xyXG4gICAgLy8gICAgIHByb2plY3RzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgLy8gICAgICAgICBkZXNhY3RpdmFyTWVudSgpO1xyXG4gICAgLy8gICAgIH0pO1xyXG4gICAgLy8gfVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgaW5pdCA9ICgpID0+IHtcclxuICAgIHN0aWNreU5hdigpO1xyXG4gICAgbWVudURlc3BsZWdhYmxlKCk7XHJcbiAgICBib3Rvbk1lbnUoKTtcclxuICAgIG1lbnVMaW5rcygpO1xyXG4gICAgYW5pbWFjaW9uQ2FyZCgpO1xyXG4gICAgZWZlY3Rvc0pzKCk7XHJcbiAgICAvLyBkZXNjYXJnYXJBcmNoaXZvKCk7XHJcbiAgICAvLyBwYXJ0aWNsZXNKUygpO1xyXG4gICAgLy8gZWplY3V0YXJNZW51KCk7XHJcbn0iLCJcclxuZXhwb3J0IGNvbnN0IGVmZWN0b3NKcyA9ICgpID0+IHtcclxuICAgIHBhcnRpY2xlc0pTKCdwYXJ0aWNsZXMtanMnLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgXCJwYXJ0aWNsZXNcIjoge1xyXG4gICAgICAgICAgICBcIm51bWJlclwiOiB7XHJcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6IDE1MCxcclxuICAgICAgICAgICAgICAgIFwiZGVuc2l0eVwiOiB7XHJcbiAgICAgICAgICAgICAgICBcImVuYWJsZVwiOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgXCJ2YWx1ZV9hcmVhXCI6IDgwMFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBcImNvbG9yXCI6IHtcclxuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogXCIjZmZmZmZmXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgXCJzaGFwZVwiOiB7XHJcbiAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJjaXJjbGVcIixcclxuICAgICAgICAgICAgICAgIFwic3Ryb2tlXCI6IHtcclxuICAgICAgICAgICAgICAgIFwid2lkdGhcIjogMCxcclxuICAgICAgICAgICAgICAgIFwiY29sb3JcIjogXCIjMDAwMDAwXCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBcInBvbHlnb25cIjoge1xyXG4gICAgICAgICAgICAgICAgXCJuYl9zaWRlc1wiOiA1XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgXCJpbWFnZVwiOiB7XHJcbiAgICAgICAgICAgICAgICBcInNyY1wiOiBcImltZy9naXRodWIuc3ZnXCIsXHJcbiAgICAgICAgICAgICAgICBcIndpZHRoXCI6IDEwMCxcclxuICAgICAgICAgICAgICAgIFwiaGVpZ2h0XCI6IDEwMFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBcIm9wYWNpdHlcIjoge1xyXG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiAwLjUsXHJcbiAgICAgICAgICAgICAgICBcInJhbmRvbVwiOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIFwiYW5pbVwiOiB7XHJcbiAgICAgICAgICAgICAgICBcImVuYWJsZVwiOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIFwic3BlZWRcIjogMSxcclxuICAgICAgICAgICAgICAgIFwib3BhY2l0eV9taW5cIjogMC4xLFxyXG4gICAgICAgICAgICAgICAgXCJzeW5jXCI6IGZhbHNlXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIFwic2l6ZVwiOiB7XHJcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6IDMsXHJcbiAgICAgICAgICAgICAgICBcInJhbmRvbVwiOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgXCJhbmltXCI6IHtcclxuICAgICAgICAgICAgICAgIFwiZW5hYmxlXCI6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgXCJzcGVlZFwiOiA0MCxcclxuICAgICAgICAgICAgICAgIFwic2l6ZV9taW5cIjogMC4xLFxyXG4gICAgICAgICAgICAgICAgXCJzeW5jXCI6IGZhbHNlXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIFwibGluZV9saW5rZWRcIjoge1xyXG4gICAgICAgICAgICAgICAgXCJlbmFibGVcIjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBcImRpc3RhbmNlXCI6IDE1MCxcclxuICAgICAgICAgICAgICAgIFwiY29sb3JcIjogXCIjZmZmZmZmXCIsXHJcbiAgICAgICAgICAgICAgICBcIm9wYWNpdHlcIjogMC40LFxyXG4gICAgICAgICAgICAgICAgXCJ3aWR0aFwiOiAxXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIFwibW92ZVwiOiB7XHJcbiAgICAgICAgICAgICAgICBcImVuYWJsZVwiOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgXCJzcGVlZFwiOiA2LFxyXG4gICAgICAgICAgICAgICAgXCJkaXJlY3Rpb25cIjogXCJub25lXCIsXHJcbiAgICAgICAgICAgICAgICBcInJhbmRvbVwiOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIFwic3RyYWlnaHRcIjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBcIm91dF9tb2RlXCI6IFwib3V0XCIsXHJcbiAgICAgICAgICAgICAgICBcImJvdW5jZVwiOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIFwiYXR0cmFjdFwiOiB7XHJcbiAgICAgICAgICAgICAgICBcImVuYWJsZVwiOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIFwicm90YXRlWFwiOiA2MDAsXHJcbiAgICAgICAgICAgICAgICBcInJvdGF0ZVlcIjogMTIwMFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIFwiaW50ZXJhY3Rpdml0eVwiOiB7XHJcbiAgICAgICAgICAgIFwiZGV0ZWN0X29uXCI6IFwiY2FudmFzXCIsXHJcbiAgICAgICAgICAgIFwiZXZlbnRzXCI6IHtcclxuICAgICAgICAgICAgICAgIFwib25ob3ZlclwiOiB7XHJcbiAgICAgICAgICAgICAgICBcImVuYWJsZVwiOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgXCJtb2RlXCI6IFwicmVwdWxzZVwiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgXCJvbmNsaWNrXCI6IHtcclxuICAgICAgICAgICAgICAgIFwiZW5hYmxlXCI6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBcIm1vZGVcIjogXCJwdXNoXCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBcInJlc2l6ZVwiOiB0cnVlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIFwibW9kZXNcIjoge1xyXG4gICAgICAgICAgICAgICAgXCJncmFiXCI6IHtcclxuICAgICAgICAgICAgICAgIFwiZGlzdGFuY2VcIjogNDAwLFxyXG4gICAgICAgICAgICAgICAgXCJsaW5lX2xpbmtlZFwiOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJvcGFjaXR5XCI6IDFcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBcImJ1YmJsZVwiOiB7XHJcbiAgICAgICAgICAgICAgICBcImRpc3RhbmNlXCI6IDQwMCxcclxuICAgICAgICAgICAgICAgIFwic2l6ZVwiOiA0MCxcclxuICAgICAgICAgICAgICAgIFwiZHVyYXRpb25cIjogMixcclxuICAgICAgICAgICAgICAgIFwib3BhY2l0eVwiOiA4LFxyXG4gICAgICAgICAgICAgICAgXCJzcGVlZFwiOiAzXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgXCJyZXB1bHNlXCI6IHtcclxuICAgICAgICAgICAgICAgIFwiZGlzdGFuY2VcIjogMjAwLFxyXG4gICAgICAgICAgICAgICAgXCJkdXJhdGlvblwiOiAwLjRcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBcInB1c2hcIjoge1xyXG4gICAgICAgICAgICAgICAgXCJwYXJ0aWNsZXNfbmJcIjogNFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIFwicmVtb3ZlXCI6IHtcclxuICAgICAgICAgICAgICAgIFwicGFydGljbGVzX25iXCI6IDJcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBcInJldGluYV9kZXRlY3RcIjogdHJ1ZVxyXG4gICAgICAgIH1cclxuICAgICk7XHJcbn1cclxuXHJcbiJdLCJuYW1lcyI6WyJWYW5pbGxhVGlsdCIsImVsZW1lbnQiLCJzZXR0aW5ncyIsIk5vZGUiLCJ0aGlzIiwid2lkdGgiLCJoZWlnaHQiLCJjbGllbnRXaWR0aCIsImNsaWVudEhlaWdodCIsImxlZnQiLCJ0b3AiLCJnYW1tYXplcm8iLCJiZXRhemVybyIsImxhc3RnYW1tYXplcm8iLCJsYXN0YmV0YXplcm8iLCJ0cmFuc2l0aW9uVGltZW91dCIsInVwZGF0ZUNhbGwiLCJldmVudCIsInVwZGF0ZUJpbmQiLCJ1cGRhdGUiLCJiaW5kIiwicmVzZXRCaW5kIiwicmVzZXQiLCJleHRlbmRTZXR0aW5ncyIsInJldmVyc2UiLCJnbGFyZSIsImlzU2V0dGluZ1RydWUiLCJnbGFyZVByZXJlbmRlciIsImZ1bGxQYWdlTGlzdGVuaW5nIiwiZ3lyb3Njb3BlIiwiZ3lyb3Njb3BlU2FtcGxlcyIsImVsZW1lbnRMaXN0ZW5lciIsImdldEVsZW1lbnRMaXN0ZW5lciIsInByZXBhcmVHbGFyZSIsInVwZGF0ZUNsaWVudFNpemUiLCJhZGRFdmVudExpc3RlbmVycyIsInVwZGF0ZUluaXRpYWxQb3NpdGlvbiIsInNldHRpbmciLCJlbGVtZW50cyIsIk5vZGVMaXN0Iiwic2xpY2UiLCJjYWxsIiwiQXJyYXkiLCJmb3JFYWNoIiwidmFuaWxsYVRpbHQiLCJ3aW5kb3ciLCJkb2N1bWVudCIsIm1vdXNlRXZlbnRFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsIm9uTW91c2VFbnRlckJpbmQiLCJvbk1vdXNlRW50ZXIiLCJvbk1vdXNlTW92ZUJpbmQiLCJvbk1vdXNlTW92ZSIsIm9uTW91c2VMZWF2ZUJpbmQiLCJvbk1vdXNlTGVhdmUiLCJvbldpbmRvd1Jlc2l6ZUJpbmQiLCJvbldpbmRvd1Jlc2l6ZSIsIm9uRGV2aWNlT3JpZW50YXRpb25CaW5kIiwib25EZXZpY2VPcmllbnRhdGlvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY2xlYXJUaW1lb3V0IiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJyZW1vdmVFdmVudExpc3RlbmVycyIsImdhbW1hIiwiYmV0YSIsInVwZGF0ZUVsZW1lbnRQb3NpdGlvbiIsInRvdGFsQW5nbGVYIiwiZ3lyb3Njb3BlTWF4QW5nbGVYIiwiZ3lyb3Njb3BlTWluQW5nbGVYIiwidG90YWxBbmdsZVkiLCJneXJvc2NvcGVNYXhBbmdsZVkiLCJneXJvc2NvcGVNaW5BbmdsZVkiLCJkZWdyZWVzUGVyUGl4ZWxYIiwiZGVncmVlc1BlclBpeGVsWSIsInBvc1giLCJwb3NZIiwiY2xpZW50WCIsImNsaWVudFkiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJzdHlsZSIsIndpbGxDaGFuZ2UiLCJzZXRUcmFuc2l0aW9uIiwidHJhbnNmb3JtIiwicGVyc3BlY3RpdmUiLCJyZXNldEdsYXJlIiwiZ2xhcmVFbGVtZW50Iiwib3BhY2l0eSIsInN0YXJ0WCIsInN0YXJ0WSIsIm1heCIsImJhY2t1cFNjYWxlIiwic2NhbGUiLCJ4IiwieSIsIk1hdGgiLCJtaW4iLCJ0aWx0WCIsInRvRml4ZWQiLCJ0aWx0WSIsInBlcmNlbnRhZ2VYIiwicGVyY2VudGFnZVkiLCJhbmdsZSIsImF0YW4yIiwiUEkiLCJyZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0Iiwib2Zmc2V0V2lkdGgiLCJvZmZzZXRIZWlnaHQiLCJ2YWx1ZXMiLCJnZXRWYWx1ZXMiLCJheGlzIiwiZGlzcGF0Y2hFdmVudCIsIkN1c3RvbUV2ZW50IiwianNUaWx0R2xhcmUiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwianNUaWx0R2xhcmVJbm5lciIsImFwcGVuZENoaWxkIiwiZ2xhcmVFbGVtZW50V3JhcHBlciIsIk9iamVjdCIsImFzc2lnbiIsInVwZGF0ZUdsYXJlU2l6ZSIsImdsYXJlU2l6ZSIsImlubmVyV2lkdGgiLCJkb2N1bWVudEVsZW1lbnQiLCJib2R5IiwiaW5uZXJIZWlnaHQiLCJ0cmFuc2l0aW9uIiwic3BlZWQiLCJlYXNpbmciLCJzZXRUaW1lb3V0IiwiZGVmYXVsdFNldHRpbmdzIiwibmV3U2V0dGluZ3MiLCJwcm9wZXJ0eSIsImhhc0F0dHJpYnV0ZSIsImF0dHJpYnV0ZSIsImdldEF0dHJpYnV0ZSIsIkpTT04iLCJwYXJzZSIsImUiLCJpbml0IiwicXVlcnlTZWxlY3RvckFsbCIsImhlYWRlciIsIm1lbnVNb3ZpbCIsImJ0biIsIm1lbnUiLCJ0YXJqZXRhIiwidG9nZ2xlIiwic2Nyb2xsWSIsInBhcnRpY2xlc0pTIl0sInNvdXJjZVJvb3QiOiIifQ==